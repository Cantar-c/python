<!DOCTYPE html>
<html>
<head>
    <title>Youtube</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/video.css">
    <link rel="stylesheet" href="css/head.css">
    <link rel="stylesheet" href="css/sidebar.css">

    <script src="js/jquery.js"></script>
    <script src="js/jump.js"></script>
    <script src="js/user.js"></script>
    <script src="js/video_user.js"></script>

</head>

<body>
<header class="title">
    <div class="left_element">
        <img class="burger_icon" src="icon/hamburger-menu.svg" alt="菜单">
        <a href="/">
            <img class="logo" src="icon/logo.png" alt="Logo">
        </a>
    </div>
    <div class="center_element">
        <input class="search" type="text" placeholder="搜索" style="margin-right: 20px;">
        <div class="search_button_div">
            <button class="search_button">
                <img class="search_button_icon" src="icon/search.svg" alt="搜索">
                <div class="search_button_text">search</div>
            </button>
        </div>
    </div>
    <div class="right_element" id="user_section">
        <img id="upload_video" class="upload_video_icon margin_right_20" src="icon/upload.svg" alt="上传视频">
    </div>
</header>

<nav class="sidebar">
    <div id="index_site" class="sidebar_Icons">
        <div>
            <img src="icon/home.svg" alt="主页">
        </div>
        <div>
            主页
        </div>
    </div>
    <div id="official_site" class="sidebar_Icons">
        <div>
            <img src="icon/指南.svg" alt="官网">
        </div>
        <div>
            官网
        </div>
    </div>
    <div id='library' class="sidebar_Icons">
        <div>
            <img src="icon/图书馆.svg" alt="图书馆">
        </div>
        <div>
            图书馆
        </div>
    </div>
    <div id='selfInfo' class="sidebar_Icons">
        <div>
            <img src="icon/原稿.svg" alt="我的合集">
        </div>
        <div>
            我的合集
        </div>
    </div>
</nav>

<main>
    <div id="user_info">

    </div>

    <div style="display: flex; justify-content: center; align-items: center;margin-top: 50px;">
        <img id='loading' class="video" src="img/loading.gif" alt="video" style="max-width: 100%; max-height: 100%;">
    </div>
    <section class="video_grid" id="videoGrid">
    </section>

</main>

<script>
    $(document).ready(function () {
        // 请求用户信息
        $.ajax({
            url: '/user', // 假设这是后端提供的用户信息接口
            method: 'GET',
            dataType: 'json',
            success: function (data) {
                if (data && data.user) {
                    var user = data.user;
                    // 动态生成用户信息 HTML 结构
                    var userHtml = `
                    <div class="user_info_card" style="text-align: center; margin-top: 20px;">
                        <img src="${user.avatar}" alt="用户头像" style="width:100px;height:100px;border-radius:50%;margin-bottom:10px;">
                        <h2 id="user_name" style="color: #808080;">${user.username}</h2>
                        <p style="color: #808080;">${user.email}</p>
                    </div>
                `;
                    // 将用户信息插入到 <main> 中
                    $('#user_info').html(userHtml);
                } else {
                    console.warn('未获取到用户信息');
                }
            },
            error: function (err) {
                console.error("获取用户信息时发生错误:", err);
            }
        });
    });
</script>

</body>
</html>
